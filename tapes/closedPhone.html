<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Closed Journal</title>
    <link rel="stylesheet" href="../css/base.css?v=110" />
    <link rel="stylesheet" href="../css/entry.css?v=110" />
    <link
      href="https://fonts.googleapis.com/css2?family=Syne:wght@700&family=Inter&display=swap"
      rel="stylesheet"
    />
    <script defer data-domain="novacane.live" src="https://plausible.io/js/script.outbound-links.tagged-events.js"></script>
  </head>
  <body class="closed-tape">
    <img src="../images/blond.JPG" alt="Blond" class="blond" />
    <button onclick="reopenJournal()" class="reopen-btn"></button>

    <script>
      function reopenJournal() {
        // Use document.referrer to go back to the page they came from
        // This will be the entry page they were on when they clicked the closed phone button
        const referrer = document.referrer;
        
        if (referrer && referrer !== window.location.href) {
          // Go back to the page they came from
          window.location.href = referrer;
        } else {
          // Fallback: try to get from URL parameter
          const params = new URLSearchParams(window.location.search);
          const from = params.get("from");
          
          if (from) {
            // Construct the path to the entry page
            window.location.href = `${from}.html`;
          } else {
            // Final fallback: go to tapes page
            window.location.href = "../tapes.html";
          }
        }
      }
    </script>
    <script>
      window.addEventListener("load", () => {
        // fade out preloader
        const preloader = document.getElementById("preloader");
        preloader.classList.add("loaded");
      });
    </script>
    <div id="preloader"></div>
  </body>
</html>
